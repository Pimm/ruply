function checkThenable(a){try{var b=a.then;}catch(a){return !1}return "function"==typeof b}function build(a,b){function c(a,d){if("function"!=typeof d)throw new TypeError(d+" is not a function");var e=2<arguments.length&&arguments[2],f=this;if(checkThenable(a))return a.then(function(a){return c.call(f,a,d,e)});if(!1===e)null==a&&(d=void 0);else if("function"==typeof e)null==a&&(d=e);else if(!0!==e)throw new TypeError(e+" is not a boolean value nor a function");return b.call(f,a,d)}return Object.defineProperty(c,"name",{value:a,configurable:!0}),c}var run=build("run",function(a,b){return b?b.call(this,a):a});var apply=build("apply",function(a,b){return b&&checkThenable(b=b.call(this,a))?b.then(function(){return a}):a});export{apply,run};