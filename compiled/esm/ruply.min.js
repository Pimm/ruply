function checkThenable(a){try{var b=a.then;}catch(a){return !1}return "function"==typeof b}var splice=[].splice;function build(a,b){return Object.defineProperty(function a(c,d){if("function"!=typeof d)throw new TypeError(d+" is not a function");var e,f=this,g=arguments;return checkThenable(c)?c.then(function(b){return g[0]=b,a.apply(f,g)}):(e=b.call(f,c,d),2<g.length?(splice.call(g,0,2,e),a.apply(f,g)):e)},"name",{value:a,configurable:!0})}var run=build("run",function(a,b){return b.call(this,a)}),runIf=build("runIf",function(a,b){return null==a?a:b.call(this,a)}),apply=build("apply",function(a,b,c){return checkThenable(c=b.call(this,a))?c.then(function(){return a}):a});export{apply,run,runIf};